(()=>{"use strict";const e="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/0tY3ZECsTgObPiElFJSy/likes",n=e=>{const n=document.createElement("section");n.className="bg-dark popUp";const t=e.querySelector(".img");n.innerHTML=`\n     <div class="w-100 container">\n         <i class="cancel-pop fa fa-times"></i>\n        <div class="w-75 container">\n          <div class="pop-img"><img class="w-100" src="${t.src}" alt="popUp" /></div>\n          <div class="pop-info"></div>\n         <form >\n             <input type="text" class="form-control input-name" placeholder="Your Name">\n            <input type="text" class="form-control input-comment" placeholder=" Your Comment">\n            <button type="submit" class="btn btn-primary">Comment</button>\n         </form>\n        </div>\n    </div> `;const c=document.querySelector("main"),i=n.querySelector(".cancel-pop"),s=n.querySelector("form");((e,n)=>{n.addEventListener("submit",(n=>{const t=document.querySelector(".input-name"),c=document.querySelector(".input-comment"),i={item_id:e,username:t.value,comment:c.value};n.preventDefault(),(async e=>{(await fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/0tY3ZECsTgObPiElFJSy/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).text()})(i)}))})(e.id,s),c.appendChild(n),i.addEventListener("click",(()=>{c.removeChild(n)}))},t=async e=>{const n=fetch(`https://api.tvmaze.com/shows/${e}`);return(await n).json()},c=async(e,n)=>{const t=await e,c=t.image.original,i=t.name,s=document.querySelectorAll(".img"),o=document.querySelectorAll(".name"),a=document.querySelectorAll(".hour"),r=document.querySelectorAll(".time"),l=document.querySelectorAll(".description"),m=document.querySelectorAll(".item");s[n-1].setAttribute("src",c),o[n-1].innerHTML=i,m[n-1].id=t.id,a[n-1].innerHTML=t.schedule.time,r[n-1].innerHTML=`${t.schedule.days[0]} ${t.premiered}`,l[n-1].innerHTML+=t.summary};window.addEventListener("load",(()=>{for(let e=1;e<7;e+=1){const n=t(e);document.querySelector("#list").innerHTML+='<li class="item"><img class="img">\n            <div class="title pr-3 py-3 d-flex justify-content-start">\n                <h2 class="name"></h2>\n                <a class="likes ml-auto">\n                    <i class="fa fa-heart-o"></i>\n                </a>\n                <p class="likesNum pl-2">0</p>\n            </div>\n            <button type="button" class="comment"> \n              <i class="fa fa-comments" aria-hidden="true"></i> Comments \n            </button>\n            <div class="addition-info d-flex px-3 py-2">\n             <span>\n              <i class="fa fa-clock-o" aria-hidden="true"></i> \n              <span class="hour"></span>\n             </span>\n             <span class="time ml-auto"></span>\n              </div>\n              <div class="description">\n                <h6>Sumary:</h6>\n              </div>\n\n        </li>',c(n,e)}(async e=>{const n=await e,t=document.querySelectorAll(".name");n.forEach((e=>{t.forEach((n=>{e.item_id===n.innerHTML&&(n.parentElement.querySelector("p").innerHTML=e.likes)}))}))})((async()=>{const n=fetch(e);return(await n).json()})()),document.querySelectorAll(".likes").forEach((n=>{n.addEventListener("click",(()=>{const t=n.parentElement.querySelector("h2").innerHTML;n.querySelector("i").classList.remove("fa-heart-o"),n.querySelector("i").classList.add("fa-heart"),(async n=>{fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:n})}),function(e){document.querySelectorAll(".name").forEach((n=>{if(n.innerHTML===e){const e=n.parentElement.querySelector("p");let t=parseInt(e.innerHTML,10);t+=1,e.innerHTML=t}}))}(n)})(t)}))})),document.querySelectorAll(".comment").forEach((e=>{e.addEventListener("click",(()=>{const t=e.parentElement;n(t)}))}))}))})();