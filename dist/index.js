(()=>{"use strict";var e={d:(n,t)=>{for(var a in t)e.o(t,a)&&!e.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:t[a]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};e.d({},{Z:()=>i});const n="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/0tY3ZECsTgObPiElFJSy/likes",t=async e=>{const n=document.createElement("section");n.className="popUp";const t=await i(e.id);n.innerHTML=`\n     <div class="w-100 container">\n         <i class="cancel-pop fa fa-times"></i>\n        <div class="w-100 container d-flex justify-content-center align-items-center flex-column">\n          <div class="pop-summary d-flex justify-content-between w-100">\n             <div class="pop-img pr-5">\n              <img class="w-100 h-100" src="${t.image.original}" />\n            </div>\n          <div class="sam-p">\n          <h6>Summary: </h6>\n            ${t.summary}\n          </div>\n\n          </div>\n          <div class="pop-info py-3 d-flex  w-100 flex-column">\n          <h2 class="mx-auto">${t.name}</h2>\n            <div class="d-flex w-100 justify-content-between">\n              <div>\n              <span>Genres :   ${t.genres.map((e=>`<span>${e}</span>`)).join(", ")}</span>              \n              </div>\n              <div>language: ${t.language}</div>\n            </div>\n            <div class="d-flex justify-content-between">\n                <div>\n                  Schedule : ${t.schedule.days}, ${t.schedule.time} \n                </div>\n                <div>\n                  TV: ${t.network.name}, ${t.network.country.name}\n                </div>\n            </div>\n          </div>\n\n         <form class="w-100 d-flex flex-column align-items-center">\n         <h2 classs="">Add a comment</h2>\n             <input type="text" class="input-name" placeholder="Your Name">\n             <textarea name="comment" class="input-comment" placeholder="Your Comment"></textarea>\n            <button type="submit" class="btn btn-primary"> \n              <i class="fa fa-comments" ></i> Comment \n            </button>\n         </form>\n        </div>\n    </div> `;const a=document.querySelector("main"),s=n.querySelector(".cancel-pop"),c=n.querySelector("form");((e,n)=>{n.addEventListener("submit",(n=>{const t=document.querySelector(".input-name"),a=document.querySelector(".input-comment"),s={item_id:e,username:t.value,comment:a.value};n.preventDefault(),(async e=>{(await fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/0tY3ZECsTgObPiElFJSy/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).text()})(s)}))})(list.id,c),a.appendChild(n),s.addEventListener("click",(()=>{a.removeChild(n)}))},a=async e=>{const n=fetch(`https://api.tvmaze.com/shows/${e}`);return(await n).json()},s=async(e,n)=>{const t=await e,a=t.image.original,s=t.name,i=document.querySelectorAll(".img"),c=document.querySelectorAll(".name"),o=document.querySelectorAll(".hour"),l=document.querySelectorAll(".time"),r=document.querySelectorAll(".description"),m=document.querySelectorAll(".item");i[n-1].setAttribute("src",a),c[n-1].innerHTML=s,m[n-1].id=t.id,o[n-1].innerHTML=t.schedule.time,l[n-1].innerHTML=`${t.schedule.days[0]} ${t.premiered}`,r[n-1].innerHTML+=t.summary};window.addEventListener("load",(()=>{for(let e=1;e<7;e+=1){const n=a(e);document.querySelector("#list").innerHTML+='<li class="item"><img class="img">\n            <div class="title pr-3 py-3 d-flex justify-content-start">\n                <h2 class="name"></h2>\n                <a class="likes ml-auto">\n                    <i class="fa fa-heart-o"></i>\n                </a>\n                <p class="likesNum pl-2">0</p>\n            </div>\n            <button type="button" class="comment"> \n              <i class="fa fa-comments" ></i> Comments \n            </button>\n            <div class="addition-info d-flex px-3 py-2">\n             <span>\n              <i class="fa fa-clock-o" aria-hidden="true"></i> \n              <span class="hour"></span>\n             </span>\n             <span class="time ml-auto"></span>\n              </div>\n              <div class="description">\n                <h6>Sumary:</h6>\n              </div>\n\n        </li>',s(n,e)}(async e=>{const n=await e,t=document.querySelectorAll(".name");n.forEach((e=>{t.forEach((n=>{e.item_id===n.innerHTML&&(n.parentElement.querySelector("p").innerHTML=e.likes)}))}))})((async()=>{const e=fetch(n);return(await e).json()})()),document.querySelectorAll(".likes").forEach((e=>{e.addEventListener("click",(()=>{const t=e.parentElement.querySelector("h2").innerHTML;e.querySelector("i").classList.remove("fa-heart-o"),e.querySelector("i").classList.add("fa-heart"),(async e=>{fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:e})}),function(e){document.querySelectorAll(".name").forEach((n=>{if(n.innerHTML===e){const e=n.parentElement.querySelector("p");let t=parseInt(e.innerHTML,10);t+=1,e.innerHTML=t}}))}(e)})(t)}))})),document.querySelectorAll(".comment").forEach((e=>{e.addEventListener("click",(()=>{const n=e.parentElement;t(n)}))}))}));const i=a})();