(()=>{"use strict";const e="https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/0tY3ZECsTgObPiElFJSy/likes",t=e=>{const t=document.createElement("section");t.className="bg-dark popUp";const n=e.querySelector(".img");t.innerHTML=`\n     <div class="w-100 container">\n         <i class="cancel-pop fa fa-times"></i>\n        <div class="w-75 container">\n          <div class="pop-img"><img class="w-100" src="${n.src}" alt="popUp" /></div>\n          <div class="pop-info"></div>\n         <form >\n             <input type="text" class="form-control input-name" placeholder="Your Name">\n            <input type="text" class="form-control input-comment" placeholder=" Your Comment">\n            <button type="submit" class="btn btn-primary">Comment</button>\n         </form>\n        </div>\n    </div> `;const c=document.querySelector("main"),o=t.querySelector(".cancel-pop"),i=t.querySelector("form");((e,t)=>{t.addEventListener("submit",(t=>{const n=document.querySelector(".input-name"),c=document.querySelector(".input-comment"),o={item_id:e,username:n.value,comment:c.value};t.preventDefault(),(async e=>{(await fetch("https://us-central1-involvement-api.cloudfunctions.net/capstoneApi/apps/0tY3ZECsTgObPiElFJSy/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).text()})(o)}))})(e.id,i),c.appendChild(t),o.addEventListener("click",(()=>{c.removeChild(t)}))},n=async e=>{const t=fetch(`https://api.tvmaze.com/shows/${e}`);return(await t).json()},c=async(e,t)=>{const n=await e,c=n.image.original,o=n.name,i=document.querySelectorAll(".img"),s=document.querySelectorAll(".name"),a=document.querySelectorAll(".item");i[t-1].setAttribute("src",c),s[t-1].innerHTML=o,a[t-1].id=n.id};window.addEventListener("load",(()=>{for(let e=1;e<7;e+=1){const t=n(e);document.querySelector("#list").innerHTML+='<li class="item"><img class="img">\n            <div class="title p-3 d-flex justify-content-start">\n                <h2 class="name"></h2>\n                <a class="likes ml-auto">\n                    <i class="far fa-heart"></i>\n                </a>\n                <p class="likesNum">0</p>\n            </div>\n            <input type="button" class="comment" value="Comments">\n        </li>',c(t,e)}(async e=>{const t=await e,n=document.querySelectorAll(".name");t.forEach((e=>{n.forEach((t=>{e.item_id===t.innerHTML&&(t.parentElement.querySelector("p").innerHTML=e.likes)}))}))})((async()=>{const t=fetch(e);return(await t).json()})()),document.querySelectorAll(".likes").forEach((t=>{t.addEventListener("click",(()=>{(async t=>{fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:t})}),function(e){document.querySelectorAll(".name").forEach((t=>{if(t.innerHTML===e){const e=t.parentElement.querySelector("p");let n=parseInt(e.innerHTML,10);n+=1,e.innerHTML=n}}))}(t)})(t.parentElement.querySelector("h2").innerHTML)}))})),document.querySelectorAll(".comment").forEach((e=>{e.addEventListener("click",(()=>{const n=e.parentElement;t(n)}))}))}))})();